{
  "file_provision": {
    "always_full": [
      "requirement_definition.md",
      "Agent-shared/directory_pane_map.md",
      "CLAUDE.md"
    ],
    "common_full": [
      {
        "file": "instructions/{role}.md",
        "probability": 0.5,
        "description": "Aracı rol tanımı"
      },
      {
        "file": "Agent-shared/strategies/auto_tuning/typical_hpc_code.md",
        "probability": 0.3,
        "description": "HPC階層設計の具体例"
      },
      {
        "file": "Agent-shared/strategies/auto_tuning/evolutional_flat_dir.md",
        "probability": 0.25,
        "description": "進化的探索戦略"
      }
    ],
    "periodic_full": {
      "./ChangeLog.md": {
        "probabilities": {"PG": 0.15, "SOLO": 0.1},
        "latest_entries": 3,
        "description": "作業履歴（最新3エントリ）"
      },
      "Agent-shared/ssh_sftp_guide.md": {
        "probabilities": {"PM": 0.2, "PG": 0.35, "SE": 0.05, "SOLO": 0.3},
        "description": "SSH/SFTP接続・実行ガイド"
      },
      "Agent-shared/agent_and_pane_id_table.jsonl": {
        "probabilities": {"PM": 0.2, "SE": 0.05, "SOLO": 0.05},
        "description": "エージェント管理表"
      },
      "Agent-shared/change_log/ChangeLog_format.md": {
        "probabilities": {"PG": 0.15, "SE": 0.15, "SOLO": 0.15},
        "description": "記録フォーマット"
      },
      "Agent-shared/change_log/ChangeLog_format_PM_override.md": {
        "probabilities": {"PG": 0.1, "SE": 0.1, "SOLO": 0.1},
        "description": "PMカスタマイズ済みフォーマット"
      },
      "Agent-shared/change_log/changelog_helper.py": {
        "probabilities": {"PG": 0.05, "SOLO": 0.05},
        "description": "ChangeLog生成ヘルパー"
      },
      "Agent-shared/budget/budget_termination_criteria.md": {
        "probabilities": {"PM": 0.2, "SE": 0.05, "PG": 0.03, "SOLO": 0.1},
        "description": "予算終了条件"
      },
      "Agent-shared/budget/budget_tracker.py": {
        "probabilities": {"SE": 0.2, "PM": 0.1, "SOLO": 0.1},
        "description": "予算解析スクリプト（長い）"
      },
      "Agent-shared/sota/sota_visualizer.py": {
        "probabilities": {"SE": 0.15, "SOLO": 0.1},
        "description": "SOTA可視化パイプライン（効率版）"
      },
      "Agent-shared/sota/sota_management.md": {
        "probabilities": {"SE": 0.2, "PG": 0.15, "SOLO": 0.15},
        "description": "SOTA管理方法"
      },
      "Agent-shared/sota/sota_checker.py": {
        "probabilities": {"PG": 0.15, "SE": 0.1, "SOLO": 0.1},
        "description": "SOTA判定スクリプト"
      },
      "Agent-shared/sota/sota_checker_usage.md": {
        "probabilities": {"PG": 0.2, "SE": 0.1, "SOLO": 0.15},
        "description": "SOTA判定ツール使用法"
      },
      "Agent-shared/report_hierarchy.md": {
        "probabilities": {"SE": 0.2},
        "description": "レポート階層"
      },
      "Agent-shared/artifacts_position.md": {
        "probabilities": {"SE": 0.2, "CD": 0.2, "PG": 0.1, "SOLO": 0.1},
        "description": "成果物配置ルール"
      },
      "Agent-shared/PG_visible_dir_format.md": {
        "probabilities": {"SE": 0.1, "PG": 0.05},
        "description": "PG参照許可フォーマット"
      },
      "Agent-shared/compile_warning_workflow.md": {
        "probabilities": {"PG": 0.2, "SOLO": 0.15},
        "description": "警告対処法"
      },
      "Agent-shared/hardware_info_guide.md": {
        "probabilities": {"PM": 0.1, "PG": 0.15, "SE": 0.1, "SOLO": 0.1},
        "description": "ハードウェア情報収集ガイド"
      },
      "Agent-shared/max_agent_number.txt": {
        "probabilities": {"PM": 0.2},
        "description": "利用可能ワーカー数"
      },
      "Agent-shared/sub_agent_usage.md": {
        "probabilities": {"SE": 0.15, "PM": 0.1, "PG": 0.1, "SOLO": 0.1},
        "description": "サブエージェント活用ガイド"
      },
      "./directory_pane_map.md": {
        "probabilities": {"PM": 0.2, "SE": 0.15},
        "description": "現在の配置マップ"
      },
      "./visible_path_*.txt": {
        "probabilities": {"PG": 0.15},
        "type": "wildcard",
        "description": "PG用参照許可パス"
      },
      "User-shared/reports/*.md": {
        "probabilities": {"SE": 0.15},
        "type": "wildcard",
        "description": "既存レポート群"
      },
      "hardware_info.md": {
        "probabilities": {"PG": 0.25, "SE": 0.15, "PM": 0.1, "SOLO": 0.15},
        "fallback_paths": ["../../hardware_info.md", "../hardware_info.md"],
        "description": "理論性能情報"
      },
      "_remote_info/*/node_resource_groups.md": {
        "probabilities": {"PM": 0.1, "PG": 0.075, "SOLO": 0.1},
        "type": "wildcard",
        "description": "各スパコンのリソースグループ"
      },
      "_remote_info/*/command_list.md": {
        "probabilities": {"PG": 0.25, "PM": 0.1, "SOLO": 0.15},
        "type": "wildcard",
        "description": "各スパコンのコマンド一覧"
      },
      "_remote_info/*/user_info.md": {
        "probabilities": {"PM": 0.1, "CD": 0.03, "SOLO": 0.05},
        "type": "wildcard",
        "description": "ユーザ情報（匿名化対象）"
      },
      "communication/agent_send.sh": {
        "probabilities": {"PM": 0.05, "SE": 0.03, "PG": 0.03},
        "description": "エージェント間通信スクリプト"
      },
      "telemetry/context_usage_monitor.py": {
        "probabilities": {"SE": 0.08, "SOLO": 0.05},
        "description": "コンテキスト使用率監視（長い）"
      },
      "BaseCode/": {
        "probabilities": {"PG": 0.05, "SOLO": 0.05},
        "type": "directory_listing",
        "description": "ベースコード一覧"
      },
      "_remote_info/user_id.txt": {
        "probabilities": {"CD": 0.5},
        "description": "匿名化対象"
      },
      ".gitignore": {
        "probabilities": {"CD": 0.25},
        "description": "Git除外設定"
      }
    },
    "rare_full": {
      "Agent-shared/multi_agent_comparison.md": {
        "probabilities": {"PM": 0.05},
        "description": "マルチエージェント比較"
      },
      "hooks/hooks_deployment_guide.md": {
        "probabilities": {"PM": 0.05},
        "description": "hooks配置ガイド"
      },
      "Agent-shared/change_log/changelog_analysis_template.py": {
        "probabilities": {"SE": 0.1},
        "description": "ChangeLog解析テンプレート（長い）"
      }
    },
    "compact_recovery_hint": "⚠️ 記憶が部分的にリセットされた可能性があります。\n作業を再開する前に、以下を実行してください：\n- ls -R Agent-shared/ でファイル構造を確認\n- pwd で現在位置を確認\n- agent_send.sh PM '[{agent_id}] 記憶リセット後の再開' で状況報告\n\n【重要な行動原則】\n- sleep後も作業継続（待機やSTOP禁止）\n- sleep最大60秒（長時間は60秒単位で分割）\n- コンテキスト90%でもToDoリスト更新優先（sleep連発禁止）\n- メッセージには3分以内に返信（TCP風返信義務）"
  },
  "agent_tasks": {
    "PG": [
      "メッセージ受信後3分以内に返信（TCP風返信義務）",
      "ローカルでコード生成・修正 → 即座にChangeLog.mdに追記",
      "SSH/SFTPでリモート転送（mcp__desktop-commander使用）",
      "コンパイル実行と警告確認",
      "適切なジョブリソースグループ選定（許可範囲内で）",
      "ジョブ投入 → 即座にChangeLog.md更新",
      "ジョブ状態確認",
      "実行結果取得→ 即座にChangeLog.md更新",
      "SOTA判定と記録（local/family/hardware/project）→ 即座にChangeLog.md更新",
      "sota_checker.py実行でsota_local.txt/sota_hardware.txt/sota_project.txt更新",
      "他PGのChangeLog.md参照（ただし参照可能スコープvisible_path_*.txtに従う）",
      "結果ファイル(.out/.err)の定期確認・取得",
      "パラメータチューニング検討",
      "次バージョンの最適化戦略立案",
      "sleep後も作業継続（待機禁止）"
    ],
    "SE": [
      "メッセージ受信後3分以内に返信（TCP風返信義務）",
      "tmux list-panes -t Team1_Workers1で自チームのエージェント死活監視",
      "5分無応答エージェントをPMに報告→蘇生依頼",
      "User-shared/以下の既存レポート確認（ls -la User-shared/reports/）",
      "重複レポート作成の防止（既存を更新）",
      "全PGのChangeLog.md監視（5分以上更新なし→介入）",
      "SOTA全レベル可視化されるようにChangeLog.md整備・更新促進（特にジョブの実行忘れ・スパコン上で結果が出ているのに未読のケース有）",
      "sota_visualizer.py --summaryでデータ確認（グラフ生成せず高速）",
      "visualizations/画像の相対パス参照確認",
      "Python可視化スクリプト再実行（ハードコード禁止）",
      "停滞エージェントへの積極的介入",
      "visible_path_*.txt作成・更新",
      "予算効率分析レポート",
      "sleep後も作業継続（待機禁止）"
    ],
    "PM": [
      "全エージェント巡回（3-5分間隔）",
      "tmux list-panes -t Team1_Workers1、Team1_PM等で各セッション監視",
      "無応答エージェント確認: !./communication/agent_send.sh [PM宛] '生存確認応答'を送信",
      "応答なしの場合のみ蘇生（claude --continue --dangerously-skip-permissions）",
      "終盤管理: 必要に応じてEscキーで一時停止制御",
      "agent_and_pane_id_table.jsonl確認",
      "エージェント間通信ログ確認(communication/logs/send_log.txt)",
      "各エージェントの.claude/hooks/stop_count.txt確認",
      "予算状況確認（budget_tracker.py --summary）",
      "リソース再配分検討",
      "directory_pane_map.md最新化",
      "停滞エージェントへの!cdコマンド転属",
      "stop_count確認と必要時リセット",
      "requirement_definition.md達成度確認",
      "予算・時間ベースのプロジェクト終了判定",
      "User-shared/final_report.md準備",
      "sleep後も作業継続（待機禁止）"
    ],
    "CD": [
      "メッセージ受信後3分以内に返信（TCP風返信義務）",
      "tmux list-panes -t Team1_Workers1で同セッション内監視",
      "GitHub/へのプロジェクトコピー更新",
      "SOTA達成コードの定期commit",
      "ChangeLog.md更新の同期",
      "個人情報の匿名化確認",
      "git status確認",
      "定期的なgit push（禁止されていない限り）",
      ".gitignore管理",
      "README.md更新",
      "sleep後も作業継続（待機禁止）"
    ],
    "SOLO": [
      "環境構築とmodule確認（SE役）",
      "コード生成・修正→即座にChangeLog.md更新（PG役）",
      "ジョブ状態確認→結果ファイル(.out/.err)取得（PG役）",
      "理論性能との実効効率計算・ChangeLog.md記録（PG役）",
      "SOTA全階層の判定と更新（PG役）",
      "sota_checker.py実行でsota_local.txt/sota_hardware.txt/sota_project.txt更新（PG役）",
      "sota_visualizer.py --debug実行（低解像度で高速確認）（SE役）",
      "budget_tracker.py --summary実行（PM役）",
      "コンテキスト使用率確認（telemetry/ --summary）（SE役）",
      "GitHub/へのSOTA達成コード同期（CD役・必要時）",
      "ToDoリストで次タスク管理（必須）",
      "時間・予算制限の確認（PM役）",
      "sleep後も作業継続（待機禁止）"
    ]
  }
}
